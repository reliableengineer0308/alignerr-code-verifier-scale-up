Use Python to solve this problem.

Problem: Segment Tree with Lazy Propagation

Description:
Implement a segment tree that supports:
1. Range update: Add a value to all elements in range [l, r]
2. Range query: Find the minimum/maximum/sum in range [l, r]

Input:
- First line: N Q (array size, number of queries)
- Second line: N integers (initial array)
- Next Q lines: 
  - "UPDATE l r val": add val to all elements in [l, r]
  - "QUERY_MIN l r": find minimum in [l, r]  
  - "QUERY_MAX l r": find maximum in [l, r]
  - "QUERY_SUM l r": find sum in [l, r]

Output:
- For each QUERY_* operation, print the result

Constraints:
- 1 ≤ N ≤ 100000
- 1 ≤ Q ≤ 100000
- -10^9 ≤ array values ≤ 10^9
- 0 ≤ l ≤ r < N

Example:
Input:
5 6
1 3 2 5 4
QUERY_SUM 0 4
UPDATE 1 3 2
QUERY_MIN 1 2  
QUERY_MAX 0 4
UPDATE 2 4 -1
QUERY_SUM 0 4

Output:
15
4
7
16

Algorithm Requirements:
- Implement segment tree with lazy propagation
- Support range updates and range queries efficiently
- Handle large input sizes (N, Q up to 100000)