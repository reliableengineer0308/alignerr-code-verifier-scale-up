Use Python to solve this problem.

Problem: Product of Array Except Self

Description:
You are an expert Python programmer. Implement a function `product_except_self(nums: list[int]) -> list[int]` that returns an array such that each element at index `i` is the product of all the numbers in `nums` except `nums[i]`.

**Key Constraint**: Solve without using division and in O(n) time.

Input:
- An integer array `nums` where `2 ≤ len(nums) ≤ 10⁵`
- Each element satisfies `-30 ≤ nums[i] ≤ 30`
- The product of any prefix or suffix fits in a 32-bit integer
- Array may contain zeros

Output:
- Return a list of integers where each `result[i] = product of all nums[j] for j ≠ i`
- Must **not use division**
- Must run in **O(n)** time
- Use **O(1)** extra space (excluding output array)

Examples:

Example 1:
Input: nums = [1, 2, 3, 4]
Output: [24, 12, 8, 6]
Explanation: 
- result[0] = 2×3×4 = 24
- result[1] = 1×3×4 = 12
- etc.

Example 2:
Input: nums = [-1, 1, 0, -3, 3]
Output: [0, 0, 9, 0, 0]
Explanation: Most positions include 0 in product → 0; only index 2 gets (-1)×1×(-3)×3 = 9

Example 3:
Input: nums = [2, 3]
Output: [3, 2]

Constraints:
- `2 ≤ len(nums) ≤ 100000`
- `-30 ≤ nums[i] ≤ 30`
- Do **not** use division
- Solve in **O(n)** time
- Use **O(1)** auxiliary space (output array doesn't count)
- Handle zeros correctly

Your Task:
Implement the function:

def product_except_self(nums: list[int]) -> list[int]:
    # Your code here

Key Requirements:
1. Compute result without division
2. Use two-pass technique:
   - First pass: compute prefix products (left to right)
   - Second pass: multiply by suffix products (right to left)
3. Store prefix in output array first, then update with suffix
4. Handle zeros naturally (no special branching needed)
5. Return the result array

Hints:
- Initialize `result[0] = 1`, then `result[i] = result[i-1] * nums[i-1]` for prefix
- Then traverse from end: maintain `suffix_product`, update `result[i] *= suffix_product`
- Update `suffix_product *= nums[i]` after each step
