Use Python to solve this problem.

Problem: Kinetic Tournament for Dynamic Geometry

Description:
You are given a set of linear functions f_i(t) = a_i * t + b_i that change over time.
Support the following operations:
1. UPDATE i a b - Update function i to f(t) = a*t + b
2. QUERY t - Find the maximum value among all functions at time t

The functions can cross each other over time, so you need to efficiently maintain the upper envelope.

Input:
- First line: N Q (number of functions, number of operations)
- Next N lines: a b (initial coefficients for each function)
- Next Q lines: operations (UPDATE i a b or QUERY t)

Output:
- For each QUERY operation, output the maximum value at time t rounded to 2 decimal places

Constraints:
- 1 ≤ N ≤ 100000
- 1 ≤ Q ≤ 100000  
- -1000 ≤ a, b, t ≤ 1000

Algorithm Requirements:
- Use kinetic tournament or segment tree with line arrangements
- Handle function updates efficiently
- Answer queries in logarithmic time

Example:
Input:
3 5
1 0
-1 5
0 2
QUERY 0
QUERY 2
UPDATE 1 0 4
QUERY 1
QUERY 3

Output:
5.00
3.00
4.00
4.00

Explanation:
- Initial functions: f1(t)=t, f2(t)=-t+5, f3(t)=2
- At t=0: max(0, 5, 2) = 5
- At t=2: max(2, 3, 2) = 3  
- Update f2 to f2(t)=4 (constant)
- At t=1: max(1, 4, 2) = 4
- At t=3: max(3, 4, 2) = 4